{# Debug template to understand data structure #}
<div class="debug-info" style="background: #f0f0f0; padding: 1rem; margin: 1rem; border: 1px solid #ccc;">
    <h3>Debug Information</h3>
    
    <h4>Current URL and Parameters:</h4>
    <pre>URL: {{ app.request.uri }}</pre>
    <pre>Query: {{ app.request.query.all|json_encode(constant('JSON_PRETTY_PRINT')) }}</pre>
    
    <h4>Mode Variable:</h4>
    <pre>{{ mode|default('not set') }}</pre>
    
    <h4>PageAsset Debug:</h4>
    <pre>pageAsset is {{ pageAsset is null ? 'NULL' : 'NOT NULL' }}</pre>
    {% if pageAsset is not null %}
        <pre>pageAsset keys: {{ pageAsset|keys|json_encode(constant('JSON_PRETTY_PRINT')) }}</pre>
        {% if pageAsset.layout is defined %}
            <pre>pageAsset.layout is {{ pageAsset.layout is null ? 'NULL' : 'NOT NULL' }}</pre>
        {% else %}
            <pre>pageAsset.layout property does NOT exist</pre>
        {% endif %}
    {% endif %}
    
    <h4>Layout Debug:</h4>
    <pre>layout variable is {{ layout is null ? 'NULL' : 'NOT NULL' }}</pre>
    {% if layout is not null %}
        <pre>layout keys: {{ layout|keys|json_encode(constant('JSON_PRETTY_PRINT')) }}</pre>
        <h5>Full Layout Structure:</h5>
        <pre>{{ layout|json_encode(constant('JSON_PRETTY_PRINT')) }}</pre>
    {% endif %}
    
    <h4>Containers:</h4>
    <pre>{{ containers ? (containers|keys|json_encode(constant('JSON_PRETTY_PRINT'))) : 'containers is null' }}</pre>
    
    {% if layout and layout.body and layout.body.rows %}
        <h4>First Container Reference:</h4>
        {% set firstContainer = null %}
        {% for row in layout.body.rows %}
            {% if firstContainer is null %}
                {% for column in row.columns %}
                    {% if firstContainer is null and column.containers and column.containers|length > 0 %}
                        {% set firstContainer = column.containers[0] %}
                    {% endif %}
                {% endfor %}
            {% endif %}
        {% endfor %}
        
        {% if firstContainer %}
            <pre>{{ firstContainer|json_encode(constant('JSON_PRETTY_PRINT')) }}</pre>
        {% else %}
            <pre>No containers found in layout</pre>
        {% endif %}
    {% else %}
        <h4>‚ùå Layout structure missing</h4>
        <pre>layout.body.rows is not available</pre>
    {% endif %}
</div> 