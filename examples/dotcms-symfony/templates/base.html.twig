<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{% block title %}Welcome!{% endblock %}</title>
        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>‚ö´Ô∏è</text></svg>">
        
        {% block stylesheets %}
            {# CSS is imported in app.js via AssetMapper #}
            
            {# SDK empty container styles are now included in app.css with dark theme #}
        {% endblock %}

        {% block javascripts %}
            {# Symfony AssetMapper JavaScript #}
            {{ importmap('app') }}
        {% endblock %}
        
        {# Set dynamic dotcms_host if provided, otherwise use the global #}
        {% set dynamic_dotcms_host = dotCMSHost|default(dotcms_host) %}
        
        {# Debug info for UVE troubleshooting #}
        {% if mode == 'EDIT_MODE' %}
            <script type="text/javascript">
                console.log('üîß UVE Debug Info:');
                console.log('Mode:', '{{ mode|default("not set") }}');
                console.log('DotCMS Host (dynamic):', '{{ dynamic_dotcms_host }}');
                console.log('DotCMS Host (env):', '{{ dotcms_host }}');
                console.log('Page Identifier (FIXED):', '{{ page.identifier|default(pageAsset.page.identifier|default("not set")) }}');
                console.log('Page Inode (FIXED):', '{{ page.inode|default(pageAsset.page.inode|default("not set")) }}');
                
                // Additional debug for page data structure
                console.log('üîç Data Structure Debug:');
                {% if pageAsset %}
                console.log('pageAsset keys:', {{ pageAsset|keys|json_encode|raw }});
                {% endif %}
                {% if page %}
                console.log('page keys:', {{ page|keys|json_encode|raw }});
                console.log('page.identifier:', '{{ page.identifier|default("not set") }}');
                console.log('page.inode:', '{{ page.inode|default("not set") }}');
                {% endif %}
                {% if pageAsset.page %}
                console.log('pageAsset.page keys:', {{ pageAsset.page|keys|json_encode|raw }});
                console.log('pageAsset.page.identifier:', '{{ pageAsset.page.identifier|default("not set") }}');
                console.log('pageAsset.page.inode:', '{{ pageAsset.page.inode|default("not set") }}');
                {% endif %}
            </script>
        {% endif %}
    </head>
    <body data-dotcms-host="{{ dynamic_dotcms_host }}">
        {% block body %}{% endblock %}
    </body>
</html>
